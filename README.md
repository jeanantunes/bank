# Bank - Test
##### Bank - Hub Fintech Project

###### Este projeto Ã© um teste para Hub Fintech.

Maven

```
mvn dependency:purge-local-repository 
mvn clean install -Dmaven.test.skip=true
mvn spring-boot:run
```
Postman

```
https://www.getpostman.com/collections/f169f14c5f146149b52d
```
H2 DataBase
```
localhost:8080/h2
```
V1__init.sql

```
DROP TABLE IF EXISTS CONTA;
CREATE TABLE CONTA(
  ID INT PRIMARY KEY,
  NOME VARCHAR2(50) NOT NULL,
  PESSOA_TIPO VARCHAR2(2) NOT NULL,
  TIPO_CONTA CHAR NOT NULL,
  STATUS CHAR NOT NULL,
  PESSOA_ID INT NOT NULL
);

DROP TABLE IF EXISTS PESSOA;
CREATE TABLE PESSOA(
  ID INT PRIMARY KEY,
  TIPO_PESSOA VARCHAR2(2) NOT NULL,
  CPF VARCHAR2(11) NULL,
  CNPJ VARCHAR2(14) NULL
);

DROP TABLE IF EXISTS PJ;
CREATE TABLE PJ(
  ID INT PRIMARY KEY,
  RAZAO_SOCIAL VARCHAR2(50) NOT NULL,
  NOME_FANTASIA VARCHAR2(50) NOT NULL,
  CNPJ VARCHAR2(14) NOT NULL,
);

DROP TABLE IF EXISTS PF;
CREATE TABLE PF(
  ID INT PRIMARY KEY,
  NOME VARCHAR2(50) NOT NULL,
  CPF VARCHAR2(11) NOT NULL,
  DATA_NASCIMENTO DATE,
);

DROP TABLE IF EXISTS AUDIT;
CREATE TABLE AUDIT(
  ID INT PRIMARY KEY,
  DATA_CRIACAO TIMESTAMP NOT NULL,
  DATA_ATUALIZACAO TIMESTAMP NOT NULL,
  PESSOA_ID INT NOT NULL
);

DROP TABLE IF EXISTS MOVIMENTACAO;
CREATE TABLE MOVIMENTACAO(
  ID INT PRIMARY KEY,
  CONTA_ID INT NOT NULL,
  DEPOSITO BIGINT,
  SAQUE BIGINT,
  PESSOA_ID INT NOT NULL
);

ALTER TABLE CONTA
  ADD FOREIGN KEY (PESSOA_TIPO) REFERENCES PESSOA(TIPO_PESSOA);

ALTER TABLE CONTA
  ADD FOREIGN KEY (PESSOA_ID) REFERENCES PESSOA(ID);


ALTER TABLE PJ
  ADD FOREIGN KEY (CNPJ) REFERENCES PESSOA(CNPJ);

ALTER TABLE PF
  ADD FOREIGN KEY (CPF) REFERENCES PESSOA(CPF);

ALTER TABLE AUDIT
  ADD FOREIGN KEY (PESSOA_ID) REFERENCES PESSOA(ID);

ALTER TABLE MOVIMENTACAO
  ADD FOREIGN KEY (CONTA_ID) REFERENCES CONTA(ID);

ALTER TABLE MOVIMENTACAO
  ADD FOREIGN KEY (PESSOA_ID) REFERENCES PESSOA(ID);

INSERT INTO PESSOA VALUES (1,'PF','22842388828',null);
INSERT INTO PESSOA VALUES (2,'PJ',null,'28466095000152');
select * from PESSOA;

INSERT INTO CONTA VALUES (1, 'CONTA 1', 'PF', 'M', 'A', '1');
INSERT INTO CONTA VALUES (2, 'CONTA 2', 'PJ', 'M', 'A', '2');
select * from CONTA;

INSERT INTO PF VALUES (1,'Jean Antunes','22842388828','1987-06-07');
select * from PF;
INSERT INTO PJ VALUES (1,'Jota IT Services Ltda - ME','Jota IT Services','28466095000152');
select * from PJ;

INSERT INTO MOVIMENTACAO VALUES (1,1,1000,200,1);
INSERT INTO MOVIMENTACAO VALUES (2,2,2000,400,2);
select * from MOVIMENTACAO;
```